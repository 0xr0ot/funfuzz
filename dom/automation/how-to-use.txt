=== One-time setup ===

Grep all the files for "jruderman" and fix the paths ;)

Install the "DOM Fuzzer" extension into the profile(s) you plan to use for fuzzing.  Don't install it as an XPI; instead, install it using a text file pointing to the directory containing the extension.

From the fuzzing directory:
    cd fuzzing/dom/extension/
    pwd > [profile directory]/extensions/domfuzz@squarefree.com
or, in the Firefox profile directory:
    mkdir extensions
    echo "~/fuzzing/dom/extension" > extensions/domfuzz@squarefree.com


=== Before starting ===

Clear out the w* log files from any previous run.

Set Mac OS X Crash Reporter to "Server" mode to suppress crash dialogs.

Turn sound off (mute the computer) if you intend to sleep.

Open firefox-bin.crash.log in Console.app and click Clear.

Make sure the last build that ran was the same one you're about to test, to avoid EM-restart issues.  (And make sure Firefox is closed.)


=== Run it ===

cd ~/fuzzing/dom/automation/
export MallocScribble=1
export MallocPreScribble=1
export XPCOM_DEBUG_BREAK=stack
export XPCOM_MEM_LEAK_LOG=1

python -u ./af_timed_run.py 120 urls-random "/Users/jruderman/central/obj-ff/dist/MinefieldDebug.app/Contents/MacOS/firefox-bin" -P fuzz1 | tee wlog`date +%Y-%m-%d-%H-%M-%S%z`
python -u ./af_timed_run.py 120 urls-random "/Users/jruderman/central/obj-ff/dist/MinefieldDebug.app/Contents/MacOS/firefox-bin" -P fuzz2 | tee wlog`date +%Y-%m-%d-%H-%M-%S%z`


Can be left unattended overnight, for example.


=== After running for a while ===

Skim through the output for interesting things.  For crashes, look through firefox-bin.crash.log using Console.app.
